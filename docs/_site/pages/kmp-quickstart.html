<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>FlowForms KMP quickstart</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/fontawesome.all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/androidstudio.min.css">
</head>
<body>
    <div id="main-content">
        <nav id="sidebar-wrapper">
    <ul class="sidebar-nav">
        <div class="rs-row center-main-axis">
            <h4 class="sidebar-brand">FlowForms index</h4>
        </div>
        
        <li> <a href="/" >Home</a> </li>
        
        <li> <a href="/pages/android-quickstart" >Android quickstart</a> </li>
        
        <li> <a href="/pages/kmp-quickstart" >KMP quickstart</a> </li>
        
    </ul>
</nav>

        <div class="rs-row">
            <div id="sidebar-empty-space"></div> <!-- TODO : Remove this on smaller devices -->
            <div class="rs-column center-second-axis">
                <div id="page-content-wrapper">
                    <div class="page-content inset">
                            <h2 id="kotlin-multi-plaftform-quickstart">Kotlin multi plaftform quickstart</h2>
<p>In order to use FlowForms you just need to make 3 steps :</p>

<p><strong>1 :</strong> Declare a Form, its fields, and their validations using our FlowForms DSL :</p>

<pre><code class="kotlin">
class Foo {

    var userName: String = "",
    var password: String = ""

    val form = flowForm {
        field(USERNAME, Required { userName })
        field(PASSWORD,
            Required { password },
            MinLength(MIN_PASSWORD_LENGTH) { password }
        )
    }

    companion object {
        const val USERNAME = "username"
        const val PASSWORD = "password"
        const val MIN_PASSWORD_LENGTH = 8
    }
}
</code></pre>
<p class="comment">In the above snippet we are declaring a form with two fields (Username &amp; Password). Both fields are required and the password field also requires to have at least 8 characters.</p>

<p><strong>2 :</strong> Listen to the fields and/or form status :</p>

<pre><code class="kotlin">
class Bar {
    ...
    private val foo = Foo()
    
    override fun listenToFlowFormStatus() {
        foo.form.fields.value.let {
            launch { it[SignUpViewModel.USERNAME]?.status?.collect(::onUserNameStatusChange) }
            launch { it[SignUpViewModel.PASSWORD]?.status?.collect(::onPasswordStatusChange) }
            launch { viewModel.form.status.collect(::onFormStatusChange) }
        }
    }

    private fun onUserNameStatusChange(status: FieldStatus) {
        when (status.code) {
            REQUIRED_UNSATISFIED -&gt; { /* Display required error */ }
            else -&gt; { /* Hide any error text on this field */ }
        }
    }

    private fun onPasswordStatusChange(status: FieldStatus) {
        when (status.code) {
            REQUIRED_UNSATISFIED -&gt; { /* Display required error */ }
            MIN_LENGTH_UNSATISFIED -&gt; { /* Display password requires x characters error */ }
            else -&gt; { /* Hide any error text on this field */ }
        }
    }

    private fun onFormStatusChange(status: FormStatus) {
        when (status.code) {
            CORRECT -&gt; { /* Enable continue button */ }
            else -&gt; { /* Disable continue button */ }
        }
    }
}
</code></pre>
<p class="comment">In the above snippet we are collecting (observing) our fields' status and reacting to its changes, like displaying an error message when the field is incorrect (ie. a field's validation failed) or hiding it when it becomes correct. 
Both REQUIRED_UNSATISFIED and MIN_LENGTH_UNSATISFIED are status codes of the fields' validations.
Additionally, we are observing the general form status, which is updated whenever a field status change.</p>

<p><strong>3 :</strong> Call the form’s validate functions whenever your inputs are affected :</p>

<pre><code class="kotlin">
class Bar {
    ...
    private val foo = Foo()

    // call this method after collecting the fields and form status
    private fun bindFields() {
        userNameInput.onTextChanged { value -&gt;
            foo.userName = "value"
            foo.form.validateOnValueChange(foo.USERNAME)
        }
        passwordInput.onTextChanged { value -&gt;
            foo.password = "value"
            foo.form.validateOnValueChange(foo.PASSWORD)
        }
    }
}
</code></pre>
<p class="comment">In the above snippet we are triggering the USERNAME field's validations whenever the text changes, these validations are the ones we specify when declaring the form in the Foo class.</p>
<div class="rs-row"> <i class="comment-icon fa-solid fa-circle-info"></i> <div class="comment">userNameInput and passwordInput are not part of kotlin's API and does not exists. We just used them to illustrate how to apply the code</div> </div>

<p>And that’s one of the easiest forms we can create using <strong>FlowForms</strong> in KMP, we don’t need to care about managing the field’s status manually nor making any complex logic to enable or disable the continue button.</p>

<p><strong>FlowForms</strong>’s full potential is better appreciated when making more complex forms, for an android usage example you can review the <a href="https://github.com/rootstrap/FlowForms/tree/main/ExampleApp%20Android/src/main/java/com/rootstrap/flowforms/example">android example app</a> included the project. Which makes use of asynchronous validations and many other capabilities. You will see that the implementation steps doesn’t change at all, except that it uses some specific android utilities in the UI layer. BTW, there is an example using Activity and another one using Fragment.</p>

<div class="rs-row center-second-axis"> <i class="comment-icon fa-solid fa-wand-magic-sparkles"></i> <div class="comment">A multi platform example app would be very helpful and a very good addition to the library. Want to collaborate? Fork the repository and make a Pull request! </div> </div>

<p>However, the example app and this guide does not cover all <strong>FlowForms</strong>’s features, so for a detailed list of all the available features please refer to the <a href="pages/documentation-index">documentation index</a></p>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/assets/js/jquery-1.10.2.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.0-beta1/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.0-beta1/languages/kotlin.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
